<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png" />
    <link rel="manifest" href="/manifest.json" />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900italic,900"
      rel="stylesheet"
    />
    <link href="/css/reset.css" rel="stylesheet" />
    <link href="/css/main.css" rel="stylesheet" />
    <title>JIG's CHIP8</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div>
      <div class="toolbar">
        <div>CHIP-8 <span class="font-200">by panhathai</span></div>
        <div>
          <a
            title="Click to open wikipedia"
            class="font-300"
            href="https://en.wikipedia.org/wiki/CHIP-8"
            >what's CHIP-8?</a
          >
        </div>
      </div>
      <div class="screen"></div>
    </div>

    <script type="module">
      import { Chip8 } from "./js/chip8.js";
      const chip8 = new Chip8(".screen");

      // var request = new XMLHttpRequest();
      // request.onload = function() {
      //   if (request.response) {
      //     chip8.start(new Uint8Array(request.response));
      //   }
      // };
      // request.open("GET", "rom/IBMLogo.ch8", true);
      // request.responseType = "arraybuffer";
      // request.send();
      fetch("rom/Pong.ch8")
        .then(response => response.arrayBuffer())
        .then(data => {
          chip8.start(new Uint8Array(data));
        });
    </script>
  </body>
</html>
